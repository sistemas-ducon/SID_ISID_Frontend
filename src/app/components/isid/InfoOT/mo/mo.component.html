<div class="container-fluid mt-3">
  <div class="card shadow-sm p-3 rounded-3">
    <div class="table-responsive table-sm custom-table-wrapper">
      <p-table 
        [value]="ManoObraConSubtotales"
        showGridlines
        stripedRows
        [scrollHeight]="'55vh'" 
        [tableStyle]="{ 'min-width': '50rem', 'width': '100%' }"
        class="table table-sm table-bordered table-hover"
        [resizableColumns]="true"
        scrollable="true">

        <!-- 游릭 Encabezado -->
        <ng-template pTemplate="header">
          <tr>
            <th pResizableColumn>Item</th>
            <th pResizableColumn>Descripci칩n</th>
            <th pResizableColumn>A (Cms)</th>
            <th pResizableColumn>H (Cms)</th>
            <th pResizableColumn>Cantidad</th>
            <th pResizableColumn>Unidad</th>
            <th pResizableColumn>Valor Und</th>
            <th pResizableColumn>Subtotal</th>
          </tr>
        </ng-template>

        <!-- 游릭 Cuerpo -->
        <ng-template pTemplate="body" let-proceso>
          <tr [ngClass]="{ 'subtotal-row': proceso.isSubtotal }">
            <!-- Datos normales -->
            <td *ngIf="!proceso.isSubtotal">{{ proceso.item }}</td>
            <td *ngIf="!proceso.isSubtotal">{{ proceso.descripcion }}</td>
            <td *ngIf="!proceso.isSubtotal">{{ proceso.ancho }}</td>
            <td *ngIf="!proceso.isSubtotal">{{ proceso.altura }}</td>
            <td *ngIf="!proceso.isSubtotal">{{ proceso.cantidad }}</td>
            <td *ngIf="!proceso.isSubtotal">{{ proceso.unidadMedida }}</td>
            <td *ngIf="!proceso.isSubtotal">{{ proceso.valorUnidad | currency }}</td>
            <td *ngIf="!proceso.isSubtotal">{{ proceso.subTotal | currency }}</td>

            <!-- 游리 Fila de subtotal -->
            <td *ngIf="proceso.isSubtotal" colspan="7" class="text-end fw-bold">
              SUBTOTAL {{ proceso.areaProduccion }}
            </td>
            <td *ngIf="proceso.isSubtotal" class="fw-bold">{{ proceso.subtotal | currency }}</td>
          </tr>
        </ng-template>

        <!-- 游릭 Pie de tabla -->
        <ng-template pTemplate="footer">
          <tr>
            <td colspan="7" class="text-end total-label">
              <span>Total Mano de Obra</span>
            </td>
            <td class="total-value">
              <strong>{{ granTotal | currency }}</strong>
            </td>
          </tr>
        </ng-template>

      </p-table>
    </div>
  </div>
</div>
